<odoo>
  <data>
    <!-- Tree view for log notes (mail.message) filtered for res.partner -->
    <record id="view_partner_log_note_tree" model="ir.ui.view">
      <field name="name">mail.message.partner.log.note.tree</field>
      <field name="model">mail.message</field>
      <field name="arch" type="xml">
        <tree string="Log Notes" create="true" delete="true" editable="bottom">
          <field name="date"/>
          <field name="author_id"/>
          <field name="body" widget="html"/>
          <field name="attachment_ids" widget="many2many_binary"/>
        </tree>
      </field>
    </record>

    <!-- Action for log note dashboard -->
    <record id="action_partner_log_note_dashboard" model="ir.actions.act_window">
      <field name="name">Log Notes</field>
      <field name="res_model">mail.message</field>
      <field name="view_mode">tree</field>
      <field name="view_id" ref="view_partner_log_note_tree"/>
      <field name="context">{'default_model': 'res.partner'}</field>
      <field name="domain">[('model','=','res.partner'),('message_type','=','comment'),('subtype_id.name','=','Note')]</field>
    </record>

    <!-- Smart button on res.partner form -->
    <record id="view_partner_form_inherit_log_note" model="ir.ui.view">
      <field name="name">res.partner.form.inherit.log.note</field>
      <field name="model">res.partner</field>
      <field name="inherit_id" ref="base.view_partner_form"/>
      <field name="arch" type="xml">
        <xpath expr="//div[contains(@class,'oe_button_box') and @name='button_box']" position="inside">
          <button name="action_open_log_note_dashboard" type="object" class="oe_stat_button" icon="fa-sticky-note" string="Log Notes"/>
        </xpath>
      </field>
    </record>
  </data>
</odoo>